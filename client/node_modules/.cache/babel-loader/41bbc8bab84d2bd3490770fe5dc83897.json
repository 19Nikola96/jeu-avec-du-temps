{"ast":null,"code":"import React,{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Board=function Board(_ref){var idRoom=_ref.idRoom,socketRef=_ref.socketRef,imPlaying=_ref.imPlaying;useEffect(function(){socketRef.current.on(\"board erased\",function(bool){var canvas=document.getElementById('board');if(canvas!==null){var ctx=canvas.getContext('2d');var inputColor=document.querySelector('.color-brush');if(inputColor!==null){inputColor.value='#000';}ctx.clearRect(0,0,0,0);ctx.lineWidth=4;canvas.height=400;}});if(imPlaying===true){drawOnCanvas();}else{socketRef.current.on(\"canvas data drawn img\",function(dataDrawing){var canvas=document.getElementById('board');if(canvas!==null){var ctx=canvas.getContext('2d');ctx.lineWidth=dataDrawing.widthOfLine;ctx.strokeStyle=dataDrawing.colorOfLine;var image=new Image();image.onload=function(){ctx.drawImage(image,0,0);};image.src=dataDrawing.base64ImageData;}// ctx.beginPath();\n// ctx.moveTo(dataDrawing.last_mouse.x, dataDrawing.last_mouse.y);\n// ctx.lineTo(dataDrawing.mouse.x, dataDrawing.mouse.y);\n// ctx.closePath();\n// ctx.stroke();\n});}},[imPlaying]);var drawOnCanvas=function drawOnCanvas(){var canvas=document.getElementById('board');var ctx=canvas.getContext('2d');// let sketch = document.querySelector('#sketch') as HTMLDivElement;\n// let sketch_style = getComputedStyle(sketch);\ncanvas.width=parseInt(getComputedStyle(canvas).getPropertyValue('width'));canvas.height=parseInt(getComputedStyle(canvas).getPropertyValue('height'));var mouse={x:0,y:0};var last_mouse={x:0,y:0};/* Mouse Capturing Work */canvas.addEventListener('mousemove',function(e){last_mouse.x=mouse.x;last_mouse.y=mouse.y;mouse.x=e.pageX-this.offsetLeft;mouse.y=e.pageY-this.offsetTop;},false);/* Drawing on Paint App */ctx.lineWidth=2;ctx.lineJoin='round';ctx.lineCap='round';ctx.strokeStyle='black';canvas.addEventListener('mousedown',function(e){canvas.addEventListener('mousemove',onPaint,false);},false);canvas.addEventListener('mouseup',function(){canvas.removeEventListener('mousemove',onPaint,false);},false);var onPaint=function onPaint(){ctx.beginPath();ctx.moveTo(last_mouse.x,last_mouse.y);ctx.lineTo(mouse.x,mouse.y);ctx.closePath();ctx.stroke();var base64ImageData=canvas.toDataURL('image/png');var drawingObj={idRoom:idRoom,last_mouse:last_mouse,mouse:mouse,widthOfLine:ctx.lineWidth,colorOfLine:ctx.strokeStyle,base64ImageData:base64ImageData};socketRef.current.emit(\"canvas data drawn\",drawingObj);};requestAnimationFrame(onPaint);};var changePenWidth=function changePenWidth(e){var _document$querySelect;var inputColor=document.querySelector('.color-brush');var newLineWidth=parseFloat(e.currentTarget.getAttribute('class'));(_document$querySelect=document.querySelector('.eraser'))===null||_document$querySelect===void 0?void 0:_document$querySelect.classList.remove('picked');var allPenWidth=document.querySelectorAll('.pen-width li');allPenWidth.forEach(function(penWidth){if(penWidth===e.currentTarget){penWidth.classList.add('picked');}else{penWidth.classList.remove('picked');}});var canvas=document.getElementById('board');var ctx=canvas.getContext('2d');ctx.lineWidth=newLineWidth;ctx.strokeStyle=inputColor.value;};var changePenColor=function changePenColor(e){var newLineColor=e.currentTarget.value;var canvas=document.getElementById('board');var ctx=canvas.getContext('2d');ctx.strokeStyle=newLineColor;};var changePenToEraser=function changePenToEraser(e){var allPenWidth=document.querySelectorAll('.pen-width li');e.currentTarget.classList.add('picked');allPenWidth.forEach(function(penWidth){penWidth.classList.remove('picked');});var canvas=document.getElementById('board');var ctx=canvas.getContext('2d');ctx.strokeStyle='white';};return/*#__PURE__*/_jsx(_Fragment,{children:imPlaying===true?/*#__PURE__*/_jsxs(\"div\",{className:\"col-7 row\",children:[/*#__PURE__*/_jsx(\"section\",{id:\"draw\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sketch\",id:\"sketch\",children:/*#__PURE__*/_jsx(\"canvas\",{id:\"board\",width:\"600\",height:\"400\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-1 d-flex flex-column align-items-start justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"color-brush-box\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-palette\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return changePenColor(e);},className:\"color-brush mx-auto\",type:\"color\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){return changePenToEraser(e);},className:\"eraser mx-auto\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eraser\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"pen-width d-flex flex-column justify-content-between mx-auto\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"2 picked\",onClick:function onClick(e){return changePenWidth(e);},children:[\" \",/*#__PURE__*/_jsx(\"span\",{}),\" \"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"4\",onClick:function onClick(e){return changePenWidth(e);},children:[\" \",/*#__PURE__*/_jsx(\"span\",{}),\" \"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"10\",onClick:function onClick(e){return changePenWidth(e);},children:[\" \",/*#__PURE__*/_jsx(\"span\",{}),\" \"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"15\",onClick:function onClick(e){return changePenWidth(e);},children:[\" \",/*#__PURE__*/_jsx(\"span\",{}),\" \"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"30\",onClick:function onClick(e){return changePenWidth(e);},children:[\" \",/*#__PURE__*/_jsx(\"span\",{}),\" \"]})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 row justify-content-center\",children:/*#__PURE__*/_jsx(\"section\",{id:\"draw\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sketch\",id:\"sketch\",children:/*#__PURE__*/_jsx(\"canvas\",{id:\"board\",width:\"600\",height:\"400\"})})})})});};export default Board;","map":{"version":3,"sources":["/Users/nikolamorice-gallier/Desktop/Projets/online-timesup/client/src/Components/Board.tsx"],"names":["React","useEffect","Board","idRoom","socketRef","imPlaying","current","on","bool","canvas","document","getElementById","ctx","getContext","inputColor","querySelector","value","clearRect","lineWidth","height","drawOnCanvas","dataDrawing","widthOfLine","strokeStyle","colorOfLine","image","Image","onload","drawImage","src","base64ImageData","width","parseInt","getComputedStyle","getPropertyValue","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","toDataURL","drawingObj","emit","requestAnimationFrame","changePenWidth","newLineWidth","parseFloat","currentTarget","getAttribute","classList","remove","allPenWidth","querySelectorAll","forEach","penWidth","add","changePenColor","newLineColor","changePenToEraser"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { TeamObj } from '../Types';\n\ntype Props = {\n    idRoom: string | number\n    socketRef: React.MutableRefObject<any>\n    imPlaying: boolean | undefined\n}\n\ntype mouseNumber = {\n    x: number\n    y: number\n}\n\ntype DrawData = {\n    idRoom: string | number\n    last_mouse: mouseNumber\n    mouse: mouseNumber\n    widthOfLine: number\n    colorOfLine: string\n    base64ImageData: string\n}\n\n\n\nconst Board: React.FC<Props>  = ({ idRoom, socketRef, imPlaying }) => {  \n    \n    useEffect(() => {\n        socketRef.current.on(\"board erased\", (bool: boolean) => {\n            let canvas = document.getElementById('board') as HTMLCanvasElement;  \n            \n            if (canvas !== null) {\n                let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;       \n            \n                let inputColor = document.querySelector('.color-brush') as HTMLInputElement\n\n                if (inputColor !== null) {\n                    inputColor.value = '#000'\n                }\n                \n                ctx.clearRect(0, 0, 0, 0)\n                            \n                ctx.lineWidth = 4;\n\n                canvas.height = 400\n            }\n    \n            \n        })\n        \n        if (imPlaying === true) {\n            drawOnCanvas();\n        } else {\n            socketRef.current.on(\"canvas data drawn img\", (dataDrawing: DrawData) => {                                                        \n                let canvas = document.getElementById('board') as HTMLCanvasElement; \n                \n                if (canvas !== null) {\n                    let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n                    ctx.lineWidth = dataDrawing.widthOfLine;\n                    ctx.strokeStyle = dataDrawing.colorOfLine;\n\n                    let image = new Image()\n                    image.onload = function() {\n                        ctx.drawImage(image, 0, 0)\n                    }\n                    image.src = dataDrawing.base64ImageData\n                }\n\n\n                // ctx.beginPath();\n                // ctx.moveTo(dataDrawing.last_mouse.x, dataDrawing.last_mouse.y);\n                // ctx.lineTo(dataDrawing.mouse.x, dataDrawing.mouse.y);\n                // ctx.closePath();\n                // ctx.stroke();\n            })\n        }\n        \n    }, [imPlaying])\n\n    const drawOnCanvas = () => {\n        \n        let canvas = document.getElementById('board') as HTMLCanvasElement;        \n        \n        let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;        \n    \n        // let sketch = document.querySelector('#sketch') as HTMLDivElement;\n        // let sketch_style = getComputedStyle(sketch);\n        canvas.width = parseInt(getComputedStyle(canvas).getPropertyValue('width'));\n        canvas.height = parseInt(getComputedStyle(canvas).getPropertyValue('height'));        \n    \n        let mouse = {x: 0, y: 0};\n        let last_mouse = {x: 0, y: 0};\n    \n        /* Mouse Capturing Work */\n        canvas.addEventListener('mousemove', function(e) {\n            \n            last_mouse.x = mouse.x;\n            last_mouse.y = mouse.y;\n    \n            mouse.x = e.pageX - this.offsetLeft;\n            mouse.y = e.pageY - this.offsetTop;\n        }, false);\n    \n    \n        /* Drawing on Paint App */\n        ctx.lineWidth = 2;\n        ctx.lineJoin = 'round';\n        ctx.lineCap = 'round';\n        ctx.strokeStyle = 'black';\n    \n        canvas.addEventListener('mousedown', function(e) {\n            canvas.addEventListener('mousemove', onPaint, false);\n        }, false);\n    \n        canvas.addEventListener('mouseup', function() {\n            canvas.removeEventListener('mousemove', onPaint, false);\n        }, false);\n\n\n        let onPaint = function() {      \n            ctx.beginPath();\n            ctx.moveTo(last_mouse.x, last_mouse.y);\n            ctx.lineTo(mouse.x, mouse.y);\n            ctx.closePath();\n            ctx.stroke();\n\n            let base64ImageData = canvas.toDataURL('image/png')\n\n            let drawingObj = {\n                idRoom,\n                last_mouse,\n                mouse,\n                widthOfLine: ctx.lineWidth,\n                colorOfLine: ctx.strokeStyle,\n                base64ImageData\n            }\n\n            socketRef.current.emit(\"canvas data drawn\", drawingObj);\n        };\n\n        requestAnimationFrame(onPaint)\n\n    }     \n    \n    const changePenWidth = (e: any) => {  \n        let inputColor = document.querySelector('.color-brush') as HTMLInputElement\n        \n        let newLineWidth = parseFloat(e.currentTarget.getAttribute('class')) \n        document.querySelector('.eraser')?.classList.remove('picked')       \n\n        let allPenWidth = document.querySelectorAll('.pen-width li');\n\n        allPenWidth.forEach((penWidth) => {\n            if (penWidth === e.currentTarget) {                \n                penWidth.classList.add('picked')   \n            } else {\n                penWidth.classList.remove('picked')       \n            }\n        })\n        \n        let canvas = document.getElementById('board') as HTMLCanvasElement;        \n\n        let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n        ctx.lineWidth = newLineWidth;\n        ctx.strokeStyle = inputColor.value;\n    }\n\n    const changePenColor = (e: any) => {\n        let newLineColor = e.currentTarget.value\n        \n        let canvas = document.getElementById('board') as HTMLCanvasElement;        \n\n        let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n        ctx.strokeStyle = newLineColor;\n    }\n\n    const changePenToEraser = (e: any) => {    \n\n        let allPenWidth = document.querySelectorAll('.pen-width li');\n\n        e.currentTarget.classList.add('picked') \n\n        allPenWidth.forEach((penWidth) => {\n                penWidth.classList.remove('picked')       \n        })\n        \n        let canvas = document.getElementById('board') as HTMLCanvasElement;        \n\n        let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n        ctx.strokeStyle = 'white';\n    }\n\n    return (\n        <>\n        { imPlaying === true\n            ? <div className=\"col-7 row\">            \n                <section id=\"draw\">\n                    <div className=\"sketch\" id=\"sketch\">\n                        <canvas id=\"board\" width=\"600\" height=\"400\"></canvas>    \n                    </div>\n                </section>\n                <div className=\"col-md-1 d-flex flex-column align-items-start justify-content-between\">\n                    <div className=\"color-brush-box\">\n                        <i className=\"fas fa-palette\"></i>\n                        <input onChange={(e) => changePenColor(e)} className=\"color-brush mx-auto\" type=\"color\"/>\n                    </div>\n                    <div onClick={(e) => changePenToEraser(e)} className=\"eraser mx-auto\"><i className=\"fas fa-eraser\"></i></div>\n                    <ul className=\"pen-width d-flex flex-column justify-content-between mx-auto\">                \n                        <li className=\"2 picked\" onClick={(e) => changePenWidth(e)} > <span></span> </li>\n                        <li className=\"4\" onClick={(e) => changePenWidth(e)} > <span></span> </li>\n                        <li className=\"10\" onClick={(e) => changePenWidth(e)} > <span></span> </li>\n                        <li className=\"15\" onClick={(e) => changePenWidth(e)} > <span></span> </li>\n                        <li className=\"30\" onClick={(e) => changePenWidth(e)} > <span></span> </li>\n                    </ul>\n                </div>                        \n            </div>\n\n            : <div className=\"col-md-12 row justify-content-center\">            \n                <section id=\"draw\">\n                    <div className=\"sketch\" id=\"sketch\">\n                        <canvas id=\"board\" width=\"600\" height=\"400\"></canvas>    \n                    </div>\n                </section>                   \n            </div>\n        }            \n        </>\n    )\n}\n\nexport default Board\n"]},"metadata":{},"sourceType":"module"}